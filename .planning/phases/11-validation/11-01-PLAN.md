---
phase: 11-validation
plan: 01
type: tdd
wave: 1
depends_on: []
files_modified:
    - internal/config/validate.go
    - internal/config/validate_test.go
autonomous: true

must_haves:
    truths:
        - "ValidateSprint returns empty slice for valid config"
        - "ValidateSprint returns all validation errors, not just first"
        - "Empty descriptions (whitespace-only) are caught as errors"
        - "Error messages include field paths like tickets[0].tasks[1].description"
    artifacts:
        - path: "internal/config/validate.go"
          provides: "ValidationError type and ValidateSprint function"
          exports: ["ValidationError", "ValidateSprint"]
        - path: "internal/config/validate_test.go"
          provides: "Test coverage for validation logic"
          min_lines: 80
    key_links:
        - from: "internal/config/validate.go"
          to: "internal/domain/sprint.go"
          via: "Sprint type parameter"
          pattern: "ValidateSprint.*Sprint"
---

<objective>
Create validation logic that collects multiple errors and catches semantic issues.

Purpose: Core validation logic that VALD-02, VALD-03, VALD-04 depend on. Separate from existing validateSprint() to support multi-error collection.
Output: ValidationError type and ValidateSprint function with comprehensive tests.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/11-validation/11-RESEARCH.md

@internal/config/sprint.go
@internal/config/sprint_test.go
@internal/domain/sprint.go
</context>

<feature>
  <name>Multi-error validation with semantic checks</name>
  <files>internal/config/validate.go, internal/config/validate_test.go</files>
  <behavior>
    ValidationError struct with Field (string) and Message (string) fields.

    ValidateSprint(*domain.Sprint) returns []ValidationError:
    - Empty slice when config is valid
    - Collects ALL errors, continues after each failure
    - Required field checks: sprint.Name, ticket.Name, task.Description
    - Semantic checks: strings.TrimSpace() for descriptions (catches whitespace-only)
    - Field paths: "name", "tickets[0].name", "tickets[0].tasks[1].description"

    Test cases:
    - Valid config -> []
    - Missing sprint name -> [{Field: "name", Message: "required"}]
    - Missing ticket name -> [{Field: "tickets[0].name", Message: "required"}]
    - Missing task description -> [{Field: "tickets[0].tasks[0].description", Message: "required"}]
    - Whitespace-only ticket description -> [{Field: "tickets[0].description", Message: "cannot be empty"}]
    - Whitespace-only task description -> [{Field: "tickets[0].tasks[0].description", Message: "cannot be empty"}]
    - Multiple errors -> returns slice with all errors

  </behavior>
  <implementation>
    1. Create internal/config/validate.go with:
       - ValidationError struct (Field, Message string)
       - ValidateSprint func that iterates Sprint, collecting errors into slice
       - Use strings.TrimSpace for semantic empty checks
       - Continue iteration after finding errors (don't short-circuit)

    2. Follow existing test patterns from sprint_test.go:
       - Table-driven tests where appropriate
       - Clear test names describing scenario
       - Use t.Errorf for failures, not assertions library

    Do NOT modify existing validateSprint() in sprint.go - it serves LoadSprint's fail-fast behavior.
    The new ValidateSprint is for the validate command's multi-error reporting.

  </implementation>
</feature>

<verification>
Run: `go test ./internal/config/... -v -run Validate`
All tests pass.
</verification>

<success_criteria>

- ValidationError type exported from config package
- ValidateSprint function returns []ValidationError
- Tests cover: valid config, missing required fields, whitespace-only descriptions, multiple errors
- `make test` passes
- `make lint` passes
  </success_criteria>

<output>
After completion, create `.planning/phases/11-validation/11-01-SUMMARY.md`
</output>
